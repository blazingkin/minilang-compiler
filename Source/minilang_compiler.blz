import JSON
import FileSystem
require declaration
require types/struct_type
require function

:main
    program = open({arguments}[0]).read_all()
    json_to_ast(program)
end

:json_to_ast(json)
    parsed = parse_json(json)
    types = parsed["types"].map!(parse_type)
    functions = parsed["functions"].map!(parse_function)
    declarations = parsed["declarations"].map!(parse_declaration)
    typecheck(types, functions, declarations)
end

:typecheck(types, functions, declarations)
    
end
