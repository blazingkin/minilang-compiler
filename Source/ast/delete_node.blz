require ast_factory
require ../types/primitive_type

constructor DeleteNode(expr, line)

    :show
        "delete " + expr
    end

    :typecheck(symbol_table, struct_map)
        typ = expr.typecheck(symbol_table, struct_map)
        if typ.type != "StructType"
            print("Type error on line "+line+": Delete tried to delete non structure")
            return primitive_type("error")
        end
        typ
    end

end

:parse_delete_node(json)
    DeleteNode!(create_node!(json["exp"]), json["line"])
end